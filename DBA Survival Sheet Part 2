Created By: Sumit 																																																																																																																																																																																																																																																														
DBA Survival Sheet 																																																																																																																																																																																																																																																															
Database Mode		Loss of	Recovery Requirements	Backup Available	Recovery Type	Recovery Steps																																																																																																																																																																																																																																																									
NOARCHIVELOG		Non-system datafile				Restore the last consistent backup																																																																																																																																																																																																																																																									
		System datafile				Restore the last consistent backup																																																																																																																																																																																																																																																									
		Datafile with no backup				Restore the last consistent backup																																																																																																																																																																																																																																																									
																																																																																																																																																																																																																																																															
		One Controlfile				SQL> SHUTDOWN IMMEDIATE																																																																																																																																																																																																																																																									
						Copy the available controlfile to lost controlfile location																																																																																																																																																																																																																																																									
						SQL> STARTUP																																																																																																																																																																																																																																																									
																																																																																																																																																																																																																																																															
		All Controlfiles	Binary / Trace backup	Binary backup		SQL> SHUTDOWN ABORT																																																																																																																																																																																																																																																									
						SQL> STARTUP NOMOUNT																																																																																																																																																																																																																																																									
						Restore the binary backup of controlfile to controlfile locations.																																																																																																																																																																																																																																																									
						SQL> RECOEVER DATABASE UNTIL CANCEL USING BACKUP CONTROLFILE:																																																																																																																																																																																																																																																									
						SQL> ALTER DATABASE OPEN RESETLOGS:																																																																																																																																																																																																																																																									
																																																																																																																																																																																																																																																															
				Trace backup		SQL> SHUTDOWN ABORT																																																																																																																																																																																																																																																									
						SQL> STARTUP NOMOUNT																																																																																																																																																																																																																																																									
						Run the create controlfile script to create a new controlfile																																																																																																																																																																																																																																																									
						SQL> RECOEVER DATABASE UNTIL CANCEL USING BACKUP CONTROLFILE:																																																																																																																																																																																																																																																									
						SQL> ALTER DATABASE OPEN RESETLOGS:																																																																																																																																																																																																																																																									
																																																																																																																																																																																																																																																															
				No backup		SQL> SHUTDOWN ABORT																																																																																																																																																																																																																																																									
						CREATE  A  CONTROLFILE SCRIPT MANUALLY																																																																																																																																																																																																																																																									
						SQL> STARTUP NOMOUNT																																																																																																																																																																																																																																																									
						Run the create controlfile script to create a new controlfile																																																																																																																																																																																																																																																									
						SQL> RECOEVER DATABASE UNTIL CANCEL USING BACKUP CONTROLFILE:																																																																																																																																																																																																																																																									
						SQL> ALTER DATABASE OPEN RESETLOGS:																																																																																																																																																																																																																																																									
																																																																																																																																																																																																																																																															
		Online Redologs (One Member)																																																																																																																																																																																																																																																													
		Online Redologs (All ACTIVE MEMBERS)																																																																																																																																																																																																																																																													
		Online Redologs (All INACTIVE MEMBERS)																																																																																																																																																																																																																																																													
		Online Redologs (All CURRENT MEMBERS)																																																																																																																																																																																																																																																													
																																																																																																																																																																																																																																																															
ARCHIVELOG		Non-system datafile			Open Database	SQL> ALTER DATABASE DATAFILE <DATAFILE NO/DATAFILE NAME> OFFLINE;																																																																																																																																																																																																																																																									
					Complete Recovery	Restore the lost datafile from backup using copy command																																																																																																																																																																																																																																																									
						SQL> RECOVER DATAFILE <DATAFILE NO/DATAFILE NAME>;																																																																																																																																																																																																																																																									
						SQL> ALTER DATABASE DATAFILE <DATAFILE NO/DATAFILE NAME> ONLINE;																																																																																																																																																																																																																																																									
																																																																																																																																																																																																																																																															
		System datafile	Closed/Open Backup+archivelogs	Closed/Open	Closed Database 	SQL> SHUTDOWN ABORT;																																																																																																																																																																																																																																																									
					Complete Recovery	Restore the lost system datafile from backup using copy command																																																																																																																																																																																																																																																									
						SQL> STARTUP MOUNT;																																																																																																																																																																																																																																																									
						SQL> RECOVER DATAFILE <DATAFILE NO/DATAFILE NAME>;																																																																																																																																																																																																																																																									
						SQL> ALTER DATABASE OPEN;																																																																																																																																																																																																																																																									
																																																																																																																																																																																																																																																															
		Datafile with no backup	All archivelogs since file addition/creation	Closed/Open		SQL> SHUTDOWN IMMEDIATE;																																																																																																																																																																																																																																																									
						SQL> STARTUP MOUNT;																																																																																																																																																																																																																																																									
						check the alert log for required datafile name and number.																																																																																																																																																																																																																																																									
						SQL> Alter database create datafile '/u01/oradata/orcl/arun01.dbf';		Check the path and default size for deteted  datafile																																																																																																																																																																																																																																																							
						SQL> recover datafile 9;																																																																																																																																																																																																																																																									
						SQL> alter database open																																																																																																																																																																																																																																																									
						check the deleted datafile tablespace status. it might be OFFLINE																																																																																																																																																																																																																																																									
						SQL> select status,file# from v$datafile;																																																																																																																																																																																																																																																									
						SQL> Alter tablespace <arun> online;																																																																																																																																																																																																																																																									
																																																																																																																																																																																																																																																															
		One Controlfile Lost				SQL> SHUTDOWN IMMEDIATE																																																																																																																																																																																																																																																									
						Copy the available controlfile to lost controlfile																																																																																																																																																																																																																																																									
						SQL> STARTUP																																																																																																																																																																																																																																																									
																																																																																																																																																																																																																																																															
		All Controlfiles lost 	Binary/Trace backup	Binary backup		SQL> SHUTDOWN ABORT																																																																																																																																																																																																																																																									
						SQL> STARTUP NOMOUNT																																																																																																																																																																																																																																																									
						Restore the binary backup of controlfile to controlfile locations.																																																																																																																																																																																																																																																									
						SQL> RECOEVER DATABASE UNTIL CANCEL USING BACKUP CONTROLFILE:																																																																																																																																																																																																																																																									
						SQL> ALTER DATABASE OPEN RESETLOGS:																																																																																																																																																																																																																																																									
				Trace backup		SQL> SHUTDOWN ABORT																																																																																																																																																																																																																																																									
						SQL> STARTUP NOMOUNT																																																																																																																																																																																																																																																									
						Run the create controlfile script to create a new controlfile																																																																																																																																																																																																																																																									
						SQL> RECOEVER DATABASE UNTIL CANCEL USING BACKUP CONTROLFILE:																																																																																																																																																																																																																																																									
						SQL> ALTER DATABASE OPEN RESETLOGS:																																																																																																																																																																																																																																																									
				No backup		SQL> SHUTDOWN ABORT																																																																																																																																																																																																																																																									
						CREATE  A  CONTROLFILE SCRIPT MANUALLY																																																																																																																																																																																																																																																									
						SQL> STARTUP NOMOUNT																																																																																																																																																																																																																																																									
						Run the create controlfile script to create a new controlfile																																																																																																																																																																																																																																																									
						SQL> RECOEVER DATABASE UNTIL CANCEL USING BACKUP CONTROLFILE:																																																																																																																																																																																																																																																									
						SQL> ALTER DATABASE OPEN RESETLOGS:																																																																																																																																																																																																																																																									
																																																																																																																																																																																																																																																															
	ONLINE REDO LOGS																																																																																																																																																																																																																																																														
		One member lost																																																																																																																																																																																																																																																													
																																																																																																																																																																																																																																																															
																																																																																																																																																																																																																																																															
																																																																																																																																																																																																																																																															
		ALL ACTIVE MEMBERS LOST				Check the BDUMP Alert Log		To check the error																																																																																																																																																																																																																																																							
		ALL INACTIVE MEMBERS LOST				sql> select * from v$log;		To check the Redo Log File ONLINE STATUS and Group Number																																																																																																																																																																																																																																																							
						sql> shut abort;		Shut down the database																																																																																																																																																																																																																																																							
						sql> startup mount;		Starttup the database in Mount Mode																																																																																																																																																																																																																																																							
					9i	SQL> alter database clear logfile unarchived group 2;		This will run in oracle 9i "logfile" keyword is use here.																																																																																																																																																																																																																																																							
					10G	SQL> alter database clear unarchived logfile group 2;		This will run in oracle 10 G, here "logfile" keywordis not used.																																																																																																																																																																																																																																																							
						SQL> alter database open;		opent the database 																																																																																																																																																																																																																																																							
																																																																																																																																																																																																																																																															
																																																																																																																																																																																																																																																															
																																																																																																																																																																																																																																																															
																																																																																																																																																																																																																																																															
		ALL CURRENT MEMBERS LOST				Check the BDUMP Alert Log		To check the error																																																																																																																																																																																																																																																							
						sql> select * from v$log;		To check the Redo Log File ONLINE STATUS and Group Number																																																																																																																																																																																																																																																							
						sql> shut abort;		Shut down the database																																																																																																																																																																																																																																																							
						sql> startup mount;		Starttup the database in Mount Mode																																																																																																																																																																																																																																																							
					Gives Error	SQL> alter database clear unarchived logfile group 2;		For CURRENT Logfile alter databae clear command will not run and gives error.																																																																																																																																																																																																																																																							
						SQL> recover database until cancel;		So we have to recover incomplete database  with UNTIL CANCEL option.																																																																																																																																																																																																																																																							
						SQL> alter database open resetlogs;		Open the database with ResetLog option.																																																																																																																																																																																																																																																							
																																																																																																																																																																																																																																																															
																																																																																																																																																																																																																																																															
